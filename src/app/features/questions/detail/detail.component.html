<div class="page">
  <mat-card *ngIf="q">
    <h2>{{ q.title }}</h2>
    <p>{{ q.text }}</p>

    <div class="imgs" *ngIf="q.images?.length">
      <img *ngFor="let img of q.images" [src]="asUrl(img)" alt="question image" />
    </div>

    <small>By {{ q.author || 'Anonymous' }} • {{ q.createdAt | date }}</small>
  </mat-card>

  <mat-card *ngIf="answers?.length">
    <h3>Answers</h3>
    <div *ngFor="let a of answers" class="answer">
      <p>{{ a.text }}</p>
      <div class="imgs" *ngIf="a.images?.length">
        <img *ngFor="let im of a.images" [src]="asUrl(im)" alt="answer image" />
      </div>
      <small>
        By {{ a.author || 'Anonymous' }} •
        {{ a.createdAt ? (a.createdAt | date:'short') : '' }}
        <span *ngIf="a.status && a.status !== 'Approved'"> • ({{ a.status }})</span>
      </small>
    </div>
  </mat-card>

  <mat-card>
    <form [formGroup]="f" (ngSubmit)="post()">
      <mat-form-field class="full">
        <mat-label>Your answer</mat-label>
        <textarea matInput rows="4" formControlName="body"></textarea>
      </mat-form-field>
      <input type="file" multiple (change)="onFiles($event)" style="margin:8px 0;" />
      <button mat-flat-button color="primary" [disabled]="f.invalid">Post answer</button>
    </form>
  </mat-card>
</div>
